# 🎮 유저심리 기반 수익성 개선 체크리스트

## 📋 수정 대상 파일 목록 및 개선 방향

### 1️⃣ 백엔드 게임 로직 파일

#### 🎰 슬롯 머신
- [x] **`cc-webapp/backend/app/services/slot_service.py`** (수정 완료)
  - [x] 소액 승리 확률 38%로 증가 (베팅액의 110-120% 지급)
  - [x] 대박 확률 2%로 조정 (베팅액의 200-300% 지급)
  - [x] 패배 확률 60%로 조정 (베팅액 100% 손실)
  - [x] 유저 타입별 승률 차등 적용 (신규 +15%, VIP +6%)
  - [x] 시간대별 승률 변동 기능 추가

#### 🎲 룰렛 게임
- [x] **`cc-webapp/backend/app/services/roulette_service.py`** (수정 완료)
  - [x] 하우스 엣지 15%로 상향 조정 (2025.07.25 구현)
  - [x] 확률 기반 경품 추첨 시스템 구현 (2025.07.25 구현)
  - [x] 일일 스핀 제한 시스템 (3회) (2025.07.25 구현)
  - [x] 유저 타입별 승률 차등 적용 (신규 +15%, VIP +6%) (2025.07.25 구현)
  - [x] 시간대별 승률 변동 기능 추가 (2025.07.25 구현)
  - [x] 근접 실패 로직을 백엔드에서 제어 (2025.07.25 구현)

#### ✂️ 가위바위보 게임
- [x] **`cc-webapp/backend/app/services/rps_service.py`** (수정 완료)
  - [x] 실제 승률 30%로 조정 (표시 승률 40%) (2025.07.25 구현)
  - [x] 무승부 확률 10%로 설정 (2025.07.25 구현)
  - [x] 유저 선택 패턴 분석 및 AI 선택 알고리즘 구현 (2025.07.25 구현)
  - [x] 연승 제어 시스템 (3연승 후 90% 패배 확률) (2025.07.25 구현)

#### 🎁 가챠 시스템
- [x] **`cc-webapp/backend/app/services/gacha_service.py`** (수정 완료)
  - [x] 확률 테이블 조정 (심리적 효과 강화) (2025.07.25 구현)
  - [x] 가챠 결과에 근접 실패 개념 도입 (2025.07.25 구현)
  - [x] 심리적 메시지 및 애니메이션 타입 시스템 (2025.07.25 구현)
  - [ ] 유저 타입별 확률 차등화 (패스)

---

### 2️⃣ 유저 관리 및 세션 관련 파일

#### 👥 유저 세그먼트
- [x] **`cc-webapp/backend/app/utils/segment_utils.py`** (구현 완료)
  - [x] 유저 타입 분류 확장 (NEW, REGULAR, VIP, RETURNING) (2025.07.25 프론트엔드 지원 구현)
  - [x] 유저 세그먼트 조회 함수 구현 (2025.07.25 구현)
  - [x] 활동 기반 세그먼트 추정 로직 (2025.07.25 구현)
  - [ ] 유저별 게임 패턴 분석 기능 추가
  - [ ] 손실률 기반 세그먼트 조정 기능

- [ ] **`cc-webapp/backend/app/routers/user_segments.py`**
  - [ ] 세그먼트 API 확장 (유저 상태 추적)
  - [ ] 유저별 추천 게임 및 베팅액 제안 기능

- [ ] **`cc-webapp/backend/app/services/user_segment_service.py`**
  - [ ] 확장된 세그먼트 관리 기능 구현
  - [ ] 유저 행동 패턴 추적 및 분석
  - [ ] 세그먼트 기반 개인화 전략 적용

#### 🔄 세션 관리
- [ ] **세션 데이터 저장 관련 파일**
  - [ ] 사용자 플레이 패턴 분석 로직 추가
  - [ ] 세션별 승/패 기록 및 베팅 금액 추적
  - [ ] 패턴 기반 미래 행동 예측 모델

---

### 3️⃣ 프론트엔드 시각적 피드백 파일

#### 🎰 슬롯 머신 UI
- [ ] **`cc-webapp/frontend/components/games/slot/SlotMachine.tsx`**
  - [ ] 근접 실패 애니메이션 추가 (대박 심볼 옆에서 정지)
  - [ ] 승리 시 과장된 시각/청각 효과
  - [ ] 패배 시 "아깝다" 느낌을 주는 연출
  - [ ] 잔액 표시 업데이트 지연 효과 (손실 시)

- [ ] **`cc-webapp/frontend/components/games/slot/WinParticleEffect.tsx`**
  - [ ] 파티클 효과 강화 및 다양화
  - [ ] 승리 금액에 따른 차별화된 효과
  - [ ] 사운드 효과와 시각 효과 동기화

#### 🎲 룰렛 UI
- [x] **`cc-webapp/frontend/components/games/roulette/RouletteGame.tsx`** (수정 완료)
  - [x] 속도 조절로 긴장감 연출 (2025.07.25 구현 - 5바퀴 이상 회전)
  - [x] 잭팟 효과 시각화 구현 (2025.07.25 구현 - 잭팟 시 특별 효과)
  - [x] 근접 실패 시각적 피드백 (2025.07.25 구현 - nearMissEffect 상태)
  - [x] 결과 모달 강화 (2025.07.25 구현 - 애니메이션 타입별 차별화)
  - [x] 스핀 히스토리 표시 (2025.07.25 구현)


- [x] **`cc-webapp/frontend/components/games/roulette/PrizeRoulette.tsx`** (수정 완료)
  - [x] 개선된 확률 표시 시스템 (2025.07.25 구현)
  - [x] 근접 실패 애니메이션 타입 지원 (2025.07.25 구현)
  - [x] 스핀 결과 히스토리 저장 (2025.07.25 구현)
  - [ ] 의도적 근접 실패 로직 구현 (40% 확률로 근접 실패)
  - [ ] 승패 결과와 애니메이션 연동 강화

#### ✂️ 가위바위보 UI
- [ ] **`cc-webapp/frontend/components/games/rps/RPSGame.tsx`**
  - [ ] 승리 시 화려한 효과 구현
  - [ ] AI의 "고민하는" 애니메이션 추가
  - [ ] 패배 원인 설명 메시지 (심리적 납득)
  - [ ] 연승 카운터 시각화

- [ ] **`cc-webapp/frontend/components/games/rps/ResultScreen.tsx`**
  - [ ] 결과 화면 강화 (승리/패배 시 다른 연출)
  - [ ] 근접 패배 느낌을 주는 UI 효과
  - [ ] "다음에는 이길 수 있다" 암시 메시지

#### 🎁 가챠 시스템 UI
- [ ] **`cc-webapp/frontend/components/games/gacha/GachaContainer.tsx`**
  - [ ] 뽑기 애니메이션 향상 (긴장감 조성)
  - [ ] 레어 아이템 근처에서 미끄러지는 효과
  - [ ] 가챠 확률 표시 UI 개선

- [ ] **`cc-webapp/frontend/components/games/gacha/GachaModal.tsx`**
  - [ ] 결과 표시 강화 (특히 근접 실패 시)
  - [ ] 다음 뽑기 유도 요소 추가
  - [ ] 축하/위로 메시지 차별화

#### 🔧 공통 UI 컴포넌트
- [ ] **`cc-webapp/frontend/components/ui/data-display/ProgressBar.tsx`**
  - [ ] 왜곡된 프로그레스 바 구현 (80% 손실 → 50% 표시)
  - [ ] 시각적으로 남은 코인이 많아 보이게 조정

- [ ] **`cc-webapp/frontend/components/ui/data-display/TokenBalanceWidget.tsx`**
  - [ ] 승리 시 즉각 업데이트
  - [ ] 손실 시 지연 업데이트 (1-2초)
  - [ ] 시각적 강조 차별화

- [ ] **`cc-webapp/frontend/components/ui/data-display/TokenDisplay.tsx`**
  - [ ] 승리 시 과장된 파티클 효과
  - [ ] 소리와 진동 효과 통합
  - [ ] 근접 실패 특수 효과

---

### 4️⃣ 데이터베이스 관련 파일

#### 📊 게임 로그 및 유저 기록
- [ ] **`cc-webapp/backend/app/repositories/game_repository.py`**
  - [ ] 상세한 게임 결과 기록 확장
  - [ ] 유저별 패턴 분석 쿼리 추가
  - [ ] 시간대별 승률 조정 데이터 저장
  - [ ] 연승/연패 추적 시스템

#### 📈 유저 통계
- [ ] **유저 행동 패턴 분석 파일**
  - [ ] 베팅 패턴 분석 로직
  - [ ] 시간대별 플레이 습관 분석
  - [ ] 손실 후 행동 예측 모델
  - [ ] 개인화된 승률 조정 알고리즘

---

## 📝 구현 우선순위

### 🔴 최우선 과제 (1주일 내)
1. [x] 슬롯 머신 승률/배당 구조 조정 (완료 - 2025.07)
2. [x] 룰렛 하우스 엣지 및 확률 시스템 구현 (완료 - 2025.07.25)
3. [x] 룰렛 고급 수익성 로직 구현 (완료 - 2025.07.25)
4. [x] 가위바위보 AI 선택 알고리즘 개선 (완료 - 2025.07.25)
5. [x] 가챠 시스템 심리적 효과 강화 (완료 - 2025.07.25)
6. [x] 유저 타입별 차별화된 승률 구현 (완료 - 슬롯 머신, 룰렛 모두 적용)

### 🟠 중요도 높음 (2-3주 내)
1. [x] 근접 실패 연출 시스템 강화 (완료 - 룰렛에 백엔드 로직까지 완전 구현)
2. [x] 시각적 피드백 조정 (완료 - 룰렛 잭팟 효과, 근접 실패 상태 구현)
3. [x] 유저별 변동 승률 시스템 구축 (완료 - 슬롯, 룰렛 모두 적용)
4. [x] 룰렛 유저 타입별 차등 확률 적용 (완료 - 2025.07.25)
5. [x] 시간대별 승률 조정 시스템 확장 (완료 - 2025.07.25)

### 🟡 장기 과제 (1-2개월 내)
1. [ ] 소셜 증명 시스템 (조작된 승리 소식)
2. [ ] 데이터 기반 개인화된 승률 조정
3. [ ] A/B 테스트로 최적 설정 도출

---

## 💡 기대 효과

1. **유저 만족도 향상**
   - 승리 체감 증가로 긍정적 경험
   - 게임 지속 시간 증가

2. **수익성 개선**
   - 월 수익 1,000만원 이상 달성
   - 유저별 최적화된 손실률 관리

3. **리텐션 향상**
   - 일평균 게임 횟수 증가
   - 재방문율 상승

---

## 📊 성과 측정 지표

1. [ ] 유저 일 평균 게임 횟수
2. [ ] 회사 월 수익
3. [ ] 유저 만족도 점수
4. [ ] 재방문율
5. [ ] 평균 세션 시간

---

## 🎯 룰렛 시스템 현재 구현 상태 (2025.07.25 기준)

### ✅ 완료된 기능들
1. **기본 확률 시스템**
   - 하우스 엣지 15% 적용된 확률 테이블
   - 7개 경품 단계별 확률 차등화
   - 잭팟 확률 1.5%로 조정

2. **프론트엔드 심리적 효과**
   - 잭팟 시 특별 glow 효과
   - 근접 실패 상태 관리 (nearMissEffect)
   - 스핀 히스토리 표시로 사회적 증명
   - 결과 모달 애니메이션 타입별 차별화

3. **기본 제한 시스템**
   - 일일 스핀 3회 제한
   - 쿨다운 시스템 (다음날 자정 초기화)

4. **고급 수익성 로직 (2025.07.25 신규 구현)**
   - 유저 타입별 승률 차등화 (NEW +15%, VIP +6%, RETURNING +8%)
   - 시간대별 승률 조정 (피크타임 -5%, 새벽 +3%, 점심 +2%)
   - 백엔드 제어 근접 실패 로직 (40% 확률)
   - 확률 테이블 동적 조정 시스템

### 🔄 추가 구현 필요한 기능들
1. **데이터 기반 개인화 (장기 과제)**
   ```python
   # 연패 중인 유저: 승률 +10% 임시 보너스 (미구현)
   # 고액 베팅 유저: 특별 확률 테이블 적용 (미구현)
   # 사용자 플레이 패턴 학습 및 적응형 확률 (미구현)
   ```

2. **고급 분석 및 최적화**
   ```python
   # A/B 테스트 기반 확률 최적화 (미구현)
   # 실시간 수익률 모니터링 (미구현)
   # 머신러닝 기반 이탈 예측 (미구현)
   ```

### 📈 구현된 수익성 개선 효과
1. **신규 유저 리텐션** - 15% 승률 보너스로 초기 경험 개선
2. **VIP 유저 만족도** - 6% 승률 보너스로 충성도 유지
3. **시간대별 수익 최적화** - 피크타임 수익률 개선, 비인기 시간대 활성화
4. **심리적 몰입도 증가** - 근접 실패 연출로 재도전 욕구 자극

---

## 🎯 가위바위보 & 가챠 시스템 구현 상태 (2025.07.25 기준)

### ✅ 가위바위보 게임 완료된 기능들
1. **수익성 최적화 확률 시스템**
   - 실제 승률 30% (표시 승률 40%)
   - 무승부 확률 10%
   - 패배 확률 60%

2. **AI 패턴 분석 알고리즘**
   - 유저 선택 패턴 추적 (최근 10게임)
   - 연속 선택 패턴 감지 및 대응
   - 가장 자주 선택하는 패턴 분석

3. **연승 제어 시스템**
   - 3연승 후 90% 강제 패배 확률
   - 연승 카운터 자동 관리
   - 심리적 보상 체계 (2배 보상)

### ✅ 가챠 시스템 완료된 기능들
1. **심리적 효과 강화 확률 테이블**
   - Legendary: 0.2% (극도로 희귀)
   - Epic: 2.5% (희소성 강화)
   - Near_Miss 시스템: 17.3% (Epic/Legendary 근접 실패)

2. **근접 실패 시스템**
   - Epic 근접 실패 → Rare 획득 (아쉬움 증폭)
   - Legendary 근접 실패 → Epic 획득 (위로 효과)
   - 연속 실패 시 근접 실패 확률 증가

3. **심리적 피드백 시스템**
   - 상황별 맞춤 메시지 생성
   - 애니메이션 타입 분류 (normal/epic/legendary/near_miss/pity)
   - 운 점수 계산 및 피드백

### 🔧 구현된 고급 기능들
1. **가위바위보 패턴 분석**
   ```python
   # 연속 선택 감지: 70% 확률로 카운터
   # 최빈 선택 분석: 60% 확률로 대응
   # 랜덤 패턴: 기본 확률 적용
   ```

2. **가챠 근접 실패 로직**
   ```python
   # 기본 근접 실패율: 17.3%
   # 50회 이상 실패 시: +10% 보정
   # 30회 이상 실패 시: +5% 보정
   ```

### 📊 예상 수익성 개선 효과
1. **가위바위보**: 실제 30% 승률로 안정적 수익 확보
2. **가챠**: 근접 실패 시스템으로 재구매율 30-40% 증가 예상
3. **심리적 몰입**: 패턴 분석으로 사용자 참여도 증가
