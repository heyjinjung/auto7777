# 🎮 프론트엔드 중심 개발 체크리스트
**Casino-Club F2P 프로젝트 개발 로드맵**

---

## 📋 현재 상황 분석
- ✅ 프론트엔드에서 **게임 로직 코어** 담당으로 변경
- ✅ 백엔드는 **API 제공자** 역할로 축소
- ✅ 테스트 커버리지 60% 달성
- ❌ 일부 테스트 파일 손상 (auth, slot)
- ❌ 데이터베이스 스키마 불일치 (site_id 컬럼)

---

## 🚀 Phase 1: 핵심 API 안정화 (최우선)

### 1.1 인증 API 완전 동작 확인 ✅
- [x] **백엔드 서버 실행 확인** (포트 8002)
- [x] **헬스체크 API** 동작 확인 (`/health`) - 엔드포인트 경로 수정 확인됨
- [x] **초대코드 생성 API** 동작 확인 (`/api/admin/invite-codes`)
- [x] **회원가입 API** 동작 확인 (`/api/auth/register`) - 엔드포인트 경로 수정 확인됨
- [x] **로그인 API** 동작 확인 (`/api/auth/login`)

### 1.2 데이터베이스 스키마 동기화
- [ ] **site_id 컬럼 추가** - 데이터베이스 마이그레이션 실행
- [ ] **phone_number 컬럼 확인**
- [ ] **password_hash 컬럼 확인**
- [ ] **테스트 데이터베이스 재생성**

### 1.3 API 통합 테스트 실행 ✅
- [x] `test_api_integration.py` 실행
- [x] 모든 인증 플로우 정상 동작 확인
- [x] 에러 응답 형식 일관성 확인

---

## 🎯 Phase 2: 프론트엔드 연동 준비 🔄

### 2.1 프론트엔드 필요 API 식별 ✅
- [x] **사용자 정보 조회 API** (`/api/users/{id}/profile`)
- [x] **토큰 잔액 조회 API** (사용자 정보 API에 포함)
- [x] **게임 결과 저장 API** (`/api/games/slot/spin`, `/api/games/roulette/spin` 등)
- [ ] **순위/통계 조회 API** (`/api/users/stats`)

### 2.2 게임 로직 분리 작업
- [x] **백엔드 게임 로직 제거/간소화**
  - [x] RPS Service → 결과 저장만
  - [x] Slot Service → 결과 저장만 (프론트엔드 로직으로 처리)
  - [ ] Roulette Service → 결과 저장만
  - [ ] Gacha Service → 확률 설정 제공만

### 2.3 API 응답 형식 표준화
- [ ] **성공 응답 형식** 통일
- [ ] **에러 응답 형식** 통일
- [ ] **페이지네이션 형식** 통일
- [ ] **프론트엔드 요구사항 반영**

---

## 🧪 Phase 3: 테스트 전략 재정비

### 3.1 손상된 테스트 파일 복구
- [ ] `test_auth.py` 재작성
- [ ] `test_slot_service.py` 재작성
- [ ] Import 오류 해결

### 3.2 게임 로직 테스트 간소화
- [ ] **복잡한 게임 로직 테스트 제거**
- [ ] **API 엔드포인트 테스트만 유지**
- [ ] **데이터 저장/조회 로직 테스트 집중**

### 3.3 통합 테스트 강화
- [ ] **프론트엔드-백엔드 연동 테스트**
- [ ] **실제 사용 시나리오 기반 테스트**
- [ ] **성능 테스트** (응답 시간)

---

## 🔄 Phase 4: 프론트엔드 연동 작업

### 4.1 프론트엔드 개발 지원
- [ ] **API 문서 업데이트** (OpenAPI/Swagger)
- [ ] **CORS 설정 확인**
- [ ] **JWT 토큰 처리 확인**
- [ ] **WebSocket 연결** (실시간 기능)

### 4.2 실시간 기능 구현
- [ ] **게임 결과 실시간 업데이트**
- [ ] **순위 실시간 업데이트**
- [ ] **알림 시스템 연동**

### 4.3 배포 환경 준비
- [ ] **개발/스테이징/프로덕션 환경 분리**
- [ ] **환경변수 설정**
- [ ] **Docker 컨테이너 설정**

---

## 📊 Phase 5: 모니터링 & 최적화

### 5.1 성능 모니터링
- [ ] **API 응답 시간 모니터링**
- [ ] **데이터베이스 쿼리 최적화**
- [ ] **메모리 사용량 확인**

### 5.2 로깅 & 에러 추적
- [ ] **구조화된 로깅 구현**
- [ ] **에러 추적 시스템** (Sentry)
- [ ] **API 사용량 분석**

### 5.3 보안 강화
- [ ] **JWT 토큰 보안 검토**
- [ ] **SQL Injection 방지**
- [ ] **Rate Limiting 구현**

---

## 🎯 즉시 실행할 작업 (Today)

### ⚡ 1시간 내 완료 목표 ✅
1. [✅] **백엔드 서버 실행 및 헬스체크**
   - ✅ 서버 실행 성공 (포트 8002)
   - ✅ /health 엔드포인트 확인 완료 (경로 수정됨)
   - ✅ Swagger UI 접근 가능 (/docs)
2. [✅] **API 통합 테스트 실행**
   - ✅ 엔드포인트 경로 확인 완료
3. [✅] **데이터베이스 스키마 오류 확인**

### 🔧 2-3시간 내 완료 목표 ✅
4. [x] **site_id 컬럼 추가 마이그레이션**
5. [x] **손상된 테스트 파일 최소 복구**
6. [x] **핵심 API 100% 동작 확인**

### 📋 금일 완료 목표 
7. [x] **프론트엔드 필요 API 목록 작성**
8. [x] **게임 로직 분리 계획 수립** - 슬롯 머신 로직 프론트엔드로 이동 완료
9. [x] **내일 작업 계획 수립**

### 🚀 서버 구입 후 즉시 실행 작업
10. [ ] **서버 접속 및 기본 설정** (서버: 139.180.155.143, Alma Linux 8)
    - [ ] SSH 키 생성 및 VS Code Remote SSH 설정
    - [ ] 방화벽 설정 (80, 443, 8002 포트 개방)
    - [ ] dnf 업데이트 및 필수 패키지 설치
11. [ ] **Docker 및 Docker Compose 설치**
    - [ ] 백엔드 컨테이너화
    - [ ] PostgreSQL 컨테이너 구성
    - [ ] Redis 컨테이너 구성
12. [ ] **도메인 연결 (선택사항)**
    - [ ] DNS A 레코드 설정
    - [ ] Let's Encrypt SSL 인증서 설정

---

## 🚨 주의사항

### ❗ 하지 말아야 할 것
- ❌ **복잡한 게임 로직 테스트 수정에 시간 낭비**
- ❌ **완벽한 테스트 커버리지 추구**
- ❌ **사용하지 않는 기능 개발**

### ✅ 집중해야 할 것
- ✅ **프론트엔드가 실제로 사용할 API만**
- ✅ **빠른 프로토타이핑과 검증**
- ✅ **프론트엔드 개발자와의 소통**

---

## 📞 다음 단계 결정 기준

```
IF 백엔드 API가 완전히 동작한다면:
  → Phase 2로 진행 (프론트엔드 연동 준비)
  
ELSE IF 기본 API도 동작하지 않는다면:
  → Phase 1에서 문제 해결 집중
  
ELSE IF 프론트엔드 요구사항이 변경된다면:
  → 요구사항 재정의 후 계획 수정
  
NOW THAT 서버 구입이 완료되었다면:
  → Phase 6 (서버 구축 및 배포) 병행 시작
  → 배포 환경 구축과 API 안정화 동시 진행
```

---

## 🖥️ Phase 6: 서버 구축 및 배포 (신규)

### 6.1 서버 초기 설정
- [ ] **운영체제 설치 및 업데이트**
- [ ] **방화벽 및 보안 설정**
- [ ] **SSH 키 기반 접근 설정**
- [ ] **도메인 연결 및 DNS 설정**

### 6.2 배포 환경 구축
- [ ] **Docker 설치 및 설정**
- [ ] **PostgreSQL 데이터베이스 설치**
  - [ ] SQLite에서 PostgreSQL로 데이터 마이그레이션
  - [ ] 백업 설정
- [ ] **Redis 설치** (캐싱 및 상태 관리용)
- [ ] **Nginx 설치 및 설정** (리버스 프록시)

### 6.3 배포 파이프라인 구축
- [ ] **CI/CD 파이프라인 설정** (GitHub Actions/Jenkins)
- [ ] **자동화된 테스트 및 배포 스크립트 작성**
- [ ] **환경별 설정 분리** (개발/스테이징/프로덕션)
- [ ] **모니터링 및 로깅 설정**

### 6.4 성능 최적화
- [ ] **서버 부하 테스트**
- [ ] **CDN 설정 (정적 자산)**
- [ ] **데이터베이스 최적화**
- [ ] **캐싱 레이어 구현**

---

**🎯 목표**: 프론트엔드 개발을 막지 않는 안정적인 백엔드 API 제공
**⏰ 우선순위**: 빠른 검증 > 완벽한 구현
**🔄 원칙**: 프론트엔드 중심 → 백엔드 지원
